<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Kakao 地图 · 首尔与釜山路况</title>
  <style>
    body{margin:0;background:#0f172a;color:#e5e7eb;font-family:system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,sans-serif}
    .container{max-width:800px;margin:20px auto;padding:16px}
    h1{font-size:20px;margin-bottom:10px;text-align:center}
    .controls{display:flex;gap:10px;justify-content:center;margin-bottom:12px}
    select,button{height:36px;border-radius:10px;border:1px solid rgba(255,255,255,.15);background:rgba(255,255,255,.06);color:#e5e7eb;padding:0 12px;cursor:pointer}
    button{background:linear-gradient(135deg,#22d3ee,#38bdf8);border:0;color:#0f172a;font-weight:600}
    #map{width:100%;height:70vh;border-radius:12px;overflow:hidden;border:1px solid rgba(255,255,255,.08)}
    #status{position:absolute;top:10px;right:10px;background:rgba(0,0,0,.45);padding:6px 10px;border-radius:8px;font-size:12px}
  </style>
</head>
<body>
  <div class="container">
    <h1>Kakao 地图 · 首尔与釜山路况</h1>
    <div class="controls">
      <select id="city">
        <option value="seoul">首尔</option>
        <option value="busan">釜山</option>
      </select>
      <button id="go">切换城市</button>
      <button id="toggle">切换路况显示</button>
    </div>
    <div id="map"><div id="status">状态：加载中…</div></div>
  </div>

  <script src="//dapi.kakao.com/v2/maps/sdk.js?appkey=4c7496df11c666d93e58b6e971be18fd&autoload=false"></script>
  <script>
    const CITIES = {
      seoul:{name:'首尔',lat:37.5665,lng:126.9780,level:7},
      busan:{name:'釜山',lat:35.1796,lng:129.0756,level:7}
    };
    let map,trafficOn=true;

    kakao.maps.load(function(){
      const container=document.getElementById('map');
      const first=CITIES.seoul;
      map=new kakao.maps.Map(container,{
        center:new kakao.maps.LatLng(first.lat,first.lng),
        level:first.level
      });
      map.addOverlayMapTypeId(kakao.maps.MapTypeId.TRAFFIC);
      document.getElementById('status').textContent='状态：路况已开启（Kakao）';

      document.getElementById('go').addEventListener('click',()=>{
        const id=document.getElementById('city').value;
        const c=CITIES[id];
        map.setCenter(new kakao.maps.LatLng(c.lat,c.lng));
        map.setLevel(c.level);
        document.getElementById('status').textContent='状态：已切换至 '+c.name+(trafficOn?'，路况已开启':'，路况隐藏');
      });

      document.getElementById('toggle').addEventListener('click',()=>{
        trafficOn=!trafficOn;
        if(trafficOn){
          map.addOverlayMapTypeId(kakao.maps.MapTypeId.TRAFFIC);
          document.getElementById('status').textContent='状态：路况已开启（Kakao）';
        }else{
          map.removeOverlayMapTypeId(kakao.maps.MapTypeId.TRAFFIC);
          document.getElementById('status').textContent='状态：路况已隐藏';
        }
      });
    });
  </script>
</body>
</html>
